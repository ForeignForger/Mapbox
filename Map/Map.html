<html>
<head>

<link href='https://api.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css' rel='stylesheet' />
<link href='css/style.css' rel='stylesheet' />
<script src='https://api.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js'></script>
<script src='js/library/jquery.min.js'></script>
<script src='js/library/knockout.js'></script>
</head>
<body>
<p>Hello there!</p>
<div id='mapbox' class="map">
</div>
<script src='js/Layers.js'></script>
<script src='js/ControlPanels.js'></script>
<script src='js/Controls.js'></script>
<script src='js/Mapbox.js'></script>
<script type="application/json" id="mapbox-layers-json">
{
	"info": {
		"controlPanels":[
			{
				"position": "top-right",
				"panelHtml": "<div class='control-panel top-right'><div class='toggle control-panel-toggle' data-bind='click: toggleControlPanel, css: { open: IsOpen() }'></div><div class='control-area'><div class= 'head'><div><div class='control-name' data-bind='click: toggleControlList'><span data-bind='text:selectedControl().controlName'></span></div><ul class='control-list' data-bind='foreach: controls, css: {open: IsControlListOpen}'><!-- ko if: $parents[0].selectedControl().controlId != controlId--><li class='control-list-element' data-bind='text: controlName, click: $parents[0].selectControl.bind($element[0], controlId)'></option><!-- /ko --></ul></div></div><div class='body' data-bind='with: selectedControl'></div></div></div>",
				"controls":	[
						{
							"layerId": "mcd",
							"controlId": "main-control",
							"controlHtml": "<div class='main-control'><div class='control-head'><div class='toggle layer-toggle' data-bind='css: { shown: layers[mainLayer.layerId].IsLayerShown()}, click: showHideLayer.bind(null, $data, mainLayer.layerId)'></div><span class='layer-name' data-bind='text: mainLayer.layerName, click: showHideLayerMenu.bind(null, $data, mainLayer.layerId), css: {active: layers[mainLayer.layerId].isLayerActive()}'></span></div><div class='control-body' data-bind='visible: layers[mainLayer.layerId].IsLayerShown() && layers[mainLayer.layerId].IsLayerMenuShown()'><ul class='element-list' data-bind='foreach: mainLayer.elements'><li class='element'><div class='toggle element-toggle' data-bind='css: { shown:  $parent.layers[$parent.mainLayer.layerId].elements[elementId].IsElementShown() }, click: $parent.toggleElementFilter.bind(null, $parent, elementId, $parent.mainLayer.layerId)'></div><span class='element-name' data-bind='text: elementName'></span></li></ul><div class='layer-list' data-bind='foreach: mainLayer.childLayerObjects'><div class='layer'><div class='layer-head'><div class='toggle layer-toggle' data-bind='css: { shown: $parent.layers[layerId].IsLayerShown() }, click: $parent.showHideLayer.bind(null, $parent, layerId)'></div><span class='layer-name' data-bind='text: layerName, click: $parent.showHideLayerMenu.bind(null, $parent, layerId), css: {active:  $parent.layers[layerId].isLayerActive()}'></span></div><div class='layer-body' data-bind='visible: $parent.layers[layerId].IsLayerShown() && $parent.layers[layerId].IsLayerMenuShown()'><ul class='child-layer-list' data-bind='foreach: childLayerObjects'><li class='child-layer'><div class='toggle layer-toggle'></div><span class='layer-name' data-bind='text: layerName'></span></li></ul></div></div></div></div></div>",
							"controlName": "Главный котроллер"
						},
						{
							"layerId": "",
							"controlId": "time-line-control",
							"controlHtml": "<div>Time line control<div>",
							"controlName": "Фильтрация по времени"
						}
					]
			}
		]
	},
	"layers":[
		{
			"id": "mcd",
			"type": "symbol",
			"source": {
				"type": "geojson",
				"data": {
					"type": "FeatureCollection",
					"features": []
				}
			},
			"metadata":
			{
				"elements": [
					{
						"elementId": "mcd1",
						"elementName": "Старый МЦД"
					}, 
					{
						"elementId": "mcd2",
						"elementName": "Новый МЦД"
					}
				],
				"parentLayers": [],
				"childLayers": ["mcd-roads", "mcd-stations"],
				"popupHtml": "",
				"layerName": "Схема Московских МЦД"
			}
		},
		{
			"id": "mcd-roads",
			"type": "line",
			"metadata":{
				"elements": [],
				"parentLayers": ["mcds"],
				"childLayers": ["mcd-road-speedInfos"],
				"popupHtml": "<div><span>This is <span data-bind='text: name'></span></span></div>",
				"layerName": "Дороги"
			},
			"source":{
				"type": "geojson",
				"data":{
					"type": "FeatureCollection",
					"features": [
						{
							"geometry": {"coordinates":[[37.484414,56.014653],[37.503356,55.974181],[37.506603,55.965428],[37.507386,55.963845],[37.508698,55.960989],[37.509084,55.959486],[37.509401,55.957464],[37.509574,55.956444],[37.509802,55.955456],[37.510231,55.954647],[37.510747,55.95403],[37.511133,55.953655],[37.51193,55.95308],[37.513642,55.951611],[37.514345,55.950889],[37.515191,55.949683],[37.528754,55.922856],[37.538088,55.90478],[37.538705,55.904022],[37.539988,55.902865],[37.541213,55.902034],[37.541695,55.90174],[37.542431,55.901374],[37.542889,55.901176],[37.543204,55.901052],[37.555343,55.896581],[37.559993,55.894911],[37.561399,55.89439],[37.562229,55.89408],[37.564077,55.893307],[37.564959,55.892733],[37.565389,55.892404],[37.56593,55.891947],[37.566404,55.891425],[37.566805,55.890845],[37.567103,55.89016],[37.567917,55.880584],[37.568145,55.879525],[37.568336,55.877667],[37.568501,55.87702],[37.573895,55.864177],[37.574303,55.863161],[37.574628,55.862145],[37.574712,55.861186],[37.574672,55.860492],[37.574575,55.859886],[37.574246,55.858759],[37.57392,55.857955],[37.57293,55.855463],[37.572721,55.854691],[37.572672,55.854181],[37.57291,55.851435],[37.573071,55.850884],[37.574284,55.847096],[37.575193,55.844522],[37.575474,55.843908],[37.576013,55.843181],[37.577741,55.841469],[37.578287,55.840691],[37.578555,55.840076],[37.578721,55.839454],[37.578789,55.838636],[37.578712,55.837892],[37.578544,55.837392],[37.578226,55.836778],[37.577849,55.836236],[37.577499,55.835879],[37.575143,55.833952],[37.574449,55.833248],[37.574114,55.832696],[37.573924,55.832377],[37.573697,55.83175],[37.573636,55.831279],[37.573861,55.825144],[37.573969,55.822809],[37.574055,55.822397],[37.574167,55.821968],[37.57432,55.821554],[37.577562,55.817209],[37.577912,55.816627],[37.578111,55.816081],[37.578723,55.813242],[37.578896,55.812641],[37.579217,55.812052],[37.579669,55.811538],[37.580584,55.81086],[37.584556,55.808922],[37.584915,55.808694],[37.585464,55.808225],[37.585761,55.807907],[37.586292,55.807149],[37.586642,55.805975],[37.588914,55.797398],[37.589381,55.794155],[37.589353,55.793626],[37.58836,55.791152],[37.587108,55.786013],[37.585703,55.781259],[37.585536,55.780783],[37.584912,55.779898],[37.583537,55.77865],[37.581828,55.77768],[37.580661,55.776988],[37.579339,55.776396],[37.577499,55.775831],[37.576811,55.775696],[37.57619,55.775551],[37.574928,55.77544],[37.573038,55.775431],[37.571049,55.775347],[37.56134,55.774352],[37.556438,55.773867],[37.555273,55.773759],[37.554732,55.773662],[37.552632,55.773427],[37.549346,55.773093],[37.548348,55.773031],[37.546783,55.773007],[37.545525,55.772932],[37.54381,55.772715],[37.542186,55.772333],[37.541383,55.772083],[37.540188,55.771578],[37.539429,55.771155],[37.538689,55.770689],[37.53785,55.769971],[37.537226,55.769292],[37.536822,55.768763],[37.536397,55.767899],[37.536214,55.766943],[37.535873,55.764491],[37.534161,55.759944],[37.53086,55.752005],[37.529805,55.750566],[37.528889,55.749776],[37.527276,55.748795],[37.52499,55.747938],[37.518964,55.746145],[37.517102,55.7454],[37.515818,55.744727],[37.514069,55.74358],[37.511513,55.741225],[37.510024,55.739618],[37.508139,55.738032],[37.506459,55.737143],[37.505314,55.736628],[37.498611,55.7346],[37.496483,55.73411],[37.48476,55.732304],[37.473426,55.730485],[37.451728,55.72706],[37.450143,55.726868],[37.449029,55.726784],[37.448447,55.726784],[37.44495,55.726741],[37.441349,55.72677],[37.414345,55.726957],[37.410969,55.726968],[37.409542,55.726921],[37.409311,55.726901],[37.40915,55.726883],[37.408186,55.726804],[37.40729,55.726637],[37.405495,55.726348],[37.404269,55.726057],[37.400119,55.724632],[37.396265,55.723303],[37.387569,55.720289],[37.382748,55.718519],[37.380236,55.717741],[37.378076,55.716895],[37.376558,55.716328],[37.375017,55.715779],[37.372691,55.714925],[37.363525,55.711679],[37.357325,55.709499],[37.355575,55.708789],[37.354011,55.708022],[37.353611,55.707781],[37.350802,55.70579],[37.338978,55.697391],[37.337302,55.696215],[37.336402,55.695527],[37.335819,55.695046],[37.333494,55.692874],[37.331948,55.69131],[37.33094,55.690264],[37.329992,55.689408],[37.329266,55.688806],[37.328311,55.688144],[37.327178,55.687517],[37.326497,55.687176],[37.325543,55.686603],[37.32262,55.685122],[37.319381,55.6837],[37.317037,55.683066],[37.308993,55.68139],[37.302827,55.680121],[37.296796,55.678796],[37.296163,55.678678],[37.295522,55.678504],[37.294114,55.678069],[37.292447,55.677437],[37.28471,55.673432],[37.278582,55.670384]],"type":"LineString"},
							"type": "Feature",
							"properties": {
								"year": 2009,
								"ownerLayer": "mcd",
								"ownerElement": "mcd1",
								"popupData": {"name": "Маршрут МЦД1"},
								"color": "#7235c6"
							}
						},
						{
							"geometry": {"coordinates":[[37.182775,55.842065],[37.193114,55.839701],[37.202865,55.837471],[37.205908,55.83661],[37.208563,55.835705],[37.249376,55.822498],[37.254297,55.820913],[37.256511,55.819904],[37.257468,55.81928],[37.262433,55.815526],[37.263615,55.814952],[37.264564,55.814571],[37.265566,55.814247],[37.266938,55.813979],[37.26802,55.813815],[37.269405,55.813744],[37.270936,55.813752],[37.271925,55.813843],[37.273494,55.814076],[37.274785,55.814434],[37.27993,55.816234],[37.285422,55.81814],[37.28695,55.818547],[37.288578,55.818758],[37.289489,55.818843],[37.291186,55.8188],[37.292505,55.818715],[37.293898,55.818466],[37.296247,55.817885],[37.29862,55.817048],[37.300436,55.816121],[37.306663,55.812935],[37.307143,55.81267],[37.307897,55.812351],[37.309226,55.811903],[37.310825,55.811554],[37.312005,55.811405],[37.31302,55.811341],[37.313689,55.811331],[37.314436,55.811351],[37.315087,55.811381],[37.316034,55.811485],[37.316983,55.811627],[37.325403,55.812856],[37.329824,55.813474],[37.331197,55.813609],[37.333874,55.81397],[37.3432,55.815332],[37.345885,55.815786],[37.347349,55.816153],[37.349349,55.816537],[37.352011,55.817081],[37.358405,55.819057],[37.359418,55.819733],[37.360039,55.820378],[37.360533,55.821094],[37.36085,55.821837],[37.361845,55.824727],[37.362535,55.82593],[37.363283,55.826854],[37.363911,55.827432],[37.365165,55.8284],[37.367118,55.829469],[37.3684,55.830005],[37.369348,55.83032],[37.370954,55.830767],[37.373023,55.831268],[37.375113,55.83172],[37.376669,55.831892],[37.382216,55.832131],[37.384055,55.832229],[37.385413,55.832426],[37.386647,55.832699],[37.388285,55.833163],[37.388994,55.833354],[37.390621,55.833677],[37.391786,55.833809],[37.392447,55.833854],[37.393519,55.833874],[37.395284,55.833727],[37.398764,55.833153],[37.401255,55.832756],[37.402281,55.83256],[37.402741,55.832479],[37.40354,55.832275],[37.404187,55.832091],[37.406636,55.831274],[37.407043,55.83115],[37.407542,55.831019],[37.408375,55.830848],[37.40877,55.830788],[37.409391,55.830706],[37.40991,55.83066],[37.41122,55.830637],[37.411818,55.830664],[37.412731,55.830745],[37.413299,55.830828],[37.413892,55.830936],[37.415231,55.831234],[37.416234,55.831437],[37.416854,55.831531],[37.417662,55.831626],[37.418303,55.831671],[37.419247,55.831683],[37.419745,55.831677],[37.420553,55.831626],[37.421133,55.831575],[37.421726,55.831495],[37.422778,55.831301],[37.423791,55.831019],[37.424642,55.830774],[37.426749,55.830131],[37.428406,55.829627],[37.429799,55.82922],[37.431045,55.828839],[37.432008,55.82857],[37.432958,55.828365],[37.43369,55.828258],[37.434814,55.828155],[37.4358,55.828095],[37.436841,55.828004],[37.437498,55.827915],[37.438671,55.827699],[37.440497,55.827227],[37.443768,55.826019],[37.445466,55.825275],[37.446192,55.824882],[37.447588,55.823822],[37.448094,55.823262],[37.448279,55.822936],[37.448429,55.822528],[37.448507,55.82215],[37.448479,55.821604],[37.448423,55.821388],[37.448141,55.820743],[37.447833,55.820256],[37.446697,55.818788],[37.44648,55.818385],[37.446323,55.817966],[37.446246,55.817395],[37.446273,55.817116],[37.446337,55.816693],[37.447057,55.815484],[37.447448,55.815131],[37.450654,55.812626],[37.451733,55.812066],[37.452607,55.811706],[37.453704,55.811405],[37.455397,55.811108],[37.456123,55.811075],[37.457457,55.811051],[37.460678,55.811213],[37.464846,55.811398],[37.46797,55.811599],[37.469051,55.811772],[37.469784,55.811961],[37.472763,55.812841],[37.478627,55.814797],[37.480441,55.815211],[37.482261,55.815395],[37.484,55.815392],[37.496295,55.815026],[37.505723,55.814815],[37.508002,55.814762],[37.509412,55.814763],[37.529356,55.815628],[37.530674,55.815609],[37.53145,55.815566],[37.532144,55.815478],[37.532784,55.815392],[37.534219,55.815092],[37.535194,55.814796],[37.536286,55.814344],[37.539125,55.812813],[37.545915,55.809029],[37.546862,55.808501],[37.548672,55.80749],[37.549604,55.806967],[37.550345,55.80661],[37.55141,55.806118],[37.551951,55.805919],[37.552828,55.805636],[37.553697,55.805406],[37.55437,55.805258],[37.55585,55.804985],[37.557287,55.804849],[37.558301,55.804835],[37.559113,55.80488],[37.559891,55.804953],[37.562951,55.805393],[37.572161,55.806926],[37.576084,55.807567],[37.580319,55.808262],[37.58156,55.808448],[37.583081,55.808646],[37.583946,55.808695],[37.585401,55.808706],[37.58644,55.808699],[37.587402,55.808643],[37.588296,55.808543],[37.589164,55.808411],[37.590164,55.808161],[37.591142,55.807917],[37.592138,55.807609],[37.593395,55.807268],[37.594766,55.806797],[37.595901,55.806242],[37.601978,55.801781],[37.60283,55.801292],[37.604396,55.800714],[37.605847,55.800377],[37.607412,55.800218],[37.608864,55.800196],[37.610361,55.800318],[37.611293,55.800445],[37.616496,55.800663],[37.617946,55.8008],[37.621624,55.801004],[37.622636,55.801106],[37.623319,55.801136],[37.624579,55.801118],[37.626228,55.800975],[37.627369,55.800776],[37.628353,55.800498],[37.628996,55.800249],[37.630066,55.799695],[37.630835,55.799263],[37.634263,55.797072],[37.635908,55.795989],[37.638142,55.794268],[37.640117,55.792815],[37.641263,55.791891],[37.643461,55.79034],[37.644087,55.789632],[37.644194,55.78937],[37.644523,55.788087],[37.644841,55.787177],[37.645004,55.786213],[37.645694,55.78427],[37.645878,55.78382],[37.646656,55.782602],[37.646773,55.782369],[37.646936,55.781915],[37.647116,55.781617],[37.647568,55.780922],[37.648017,55.780314],[37.648731,55.779326],[37.649063,55.778864],[37.650097,55.777864],[37.651243,55.776585],[37.652226,55.775335],[37.652483,55.775128],[37.653268,55.774163],[37.653702,55.773422],[37.654384,55.771558],[37.654841,55.770173],[37.655341,55.769155],[37.656515,55.767458],[37.657768,55.765709],[37.658439,55.764712],[37.658979,55.763654],[37.659197,55.763126],[37.660597,55.761091],[37.661396,55.759388],[37.662549,55.756932],[37.663008,55.756141],[37.663364,55.755574],[37.664483,55.754403],[37.666953,55.752604],[37.667499,55.752197],[37.667974,55.751856],[37.669189,55.751249],[37.67046,55.750767],[37.671709,55.750356],[37.672362,55.750176],[37.673226,55.750007],[37.676314,55.749549],[37.678451,55.749185],[37.679636,55.748937],[37.680648,55.748725],[37.681532,55.748504],[37.682451,55.748237],[37.68317,55.747994],[37.683922,55.747673],[37.68466,55.747311],[37.685781,55.746764],[37.687058,55.746197],[37.688049,55.745697],[37.689835,55.744907],[37.693065,55.743456],[37.694281,55.742829],[37.695243,55.742299],[37.696085,55.74169],[37.697109,55.740693],[37.697983,55.739407],[37.6992,55.737181],[37.699472,55.736731],[37.699924,55.736138],[37.700308,55.735681],[37.701055,55.734989],[37.701863,55.734306],[37.703368,55.73304],[37.704303,55.732282],[37.726241,55.714208],[37.726801,55.713695],[37.727322,55.713182],[37.728211,55.712194],[37.728836,55.711245],[37.729095,55.710639],[37.72917,55.710391],[37.729251,55.710039],[37.729487,55.707811],[37.729678,55.705455],[37.729819,55.703706],[37.730051,55.701216],[37.730499,55.698521],[37.731174,55.695403],[37.731561,55.693962],[37.732503,55.692379],[37.733762,55.691098],[37.7341,55.690604],[37.734397,55.689967],[37.734623,55.689166],[37.734742,55.688954],[37.734851,55.688561],[37.734965,55.687982],[37.73511,55.687491],[37.735145,55.687223],[37.735149,55.687035],[37.735092,55.686771],[37.734942,55.686461],[37.734743,55.68607],[37.734265,55.685225],[37.733596,55.684079],[37.733302,55.683561],[37.73306,55.683066],[37.732699,55.68224],[37.732436,55.681472],[37.732111,55.680751],[37.731292,55.679319],[37.730542,55.677997],[37.730159,55.677342],[37.72918,55.675641],[37.728475,55.674423],[37.727151,55.672133],[37.72678,55.671402],[37.726149,55.670305],[37.72535,55.668949],[37.724428,55.667703],[37.723958,55.667059],[37.722973,55.665763],[37.722254,55.664968],[37.721674,55.664406],[37.721074,55.663774],[37.72069,55.663455],[37.719913,55.662932],[37.716661,55.660857],[37.713096,55.658379],[37.70891,55.655239],[37.705807,55.65291],[37.699622,55.648369],[37.69838304541605,55.64744293553704],[37.696682,55.645919],[37.696341800977535,55.64560633541711],[37.69316,55.643208],[37.69186744796579,55.64229237520985],[37.689841,55.640808],[37.688765,55.639823],[37.688029,55.638878],[37.687518,55.637854],[37.686663,55.635407],[37.685691,55.632574],[37.685469,55.631983],[37.68523,55.631434],[37.684685,55.630664],[37.68432959913207,55.63026001055184],[37.68379070107438,55.6297422985572],[37.68272916619949,55.62888541789914],[37.67879787926205,55.62569959120461],[37.678408834676844,55.62537658860998],[37.678126436778854,55.62514754968103],[37.677703200587615,55.62488557680723],[37.67605429983912,55.62356958048296],[37.6715399778673,55.62004549058227],[37.67012712365093,55.61903863501874],[37.669532868433976,55.61863787503958],[37.66927566664408,55.61847406438622],[37.668524514388736,55.61803530443851],[37.66728267187764,55.617453288454925],[37.66581344233944,55.6168862550856],[37.66506612314569,55.61662852132554],[37.6618051451147,55.61574165427629],[37.661032158001376,55.61553686506619],[37.65935112172758,55.615148865630346],[37.6579891282675,55.61486084477315],[37.6550236335998,55.614259865348004],[37.65123823327232,55.61345523712711],[37.649619878745135,55.61310439930258],[37.64686444661933,55.61251697055829],[37.64540575979464,55.612182822711105],[37.64441138173751,55.61191847961237],[37.643153067826205,55.611532602880004],[37.642073144902014,55.61112823045352],[37.641490786469944,55.61087220712059],[37.640567244357186,55.61040787487562],[37.640018184125466,55.610123778244],[37.63944698525694,55.609772954392895],[37.63847585087721,55.609068832343794],[37.63790984832508,55.60857575628722],[37.636337080755084,55.607061272732466],[37.63485606806262,55.60557762303989],[37.633305158971126,55.604114770250106],[37.63156126760407,55.602373111722414],[37.63017405284819,55.60098166093739],[37.629412781507654,55.60021347792386],[37.628995594384094,55.5998437433276],[37.627788587525714,55.598944424833206],[37.62694272749334,55.59846305683132],[37.62557122081344,55.59782930299801],[37.62406149298704,55.5971569441422],[37.622492185926404,55.59645522759743],[37.62094309373137,55.59577557190386],[37.620033183341945,55.59528524127188],[37.61886237222038,55.59458116567464],[37.617590519860954,55.5936223499578],[37.61669153253965,55.59263986712088],[37.61576956161548,55.59131994402537],[37.61518511745618,55.589938246116475],[37.61502204006935,55.589230677707484],[37.61499007521746,55.58872487236263],[37.61495203423269,55.58805588862802],[37.61439141976939,55.58463523569094],[37.61403168645995,55.58174846387945],[37.613806051409455,55.579877244691886],[37.61348908701194,55.577227695798314],[37.61330616306796,55.57567962672644],[37.61304267504301,55.573815],[37.61225878425924,55.5720100797123],[37.611034,55.570625],[37.60737640178081,55.5669438019155],[37.60617330506378,55.56586648536637],[37.604746402784286,55.5650152043917],[37.601269766307766,55.563328719251814],[37.59977969006965,55.56273648476696],[37.59848047696926,55.562337271569845],[37.597110756255404,55.561868180470015],[37.59624493446205,55.56153032679964],[37.59429288239224,55.56062974104327],[37.5925634625637,55.55950880630638],[37.589303154171716,55.557358182107976],[37.58572951946789,55.55496904837324],[37.58280408131,55.55300273273107],[37.580380287182265,55.551374626176084],[37.57800355613679,55.549778067366304],[37.575527595611305,55.548203182192935],[37.5744172328651,55.54743257600697],[37.57359762406227,55.54672055700652],[37.57312630783039,55.546248652178235],[37.572105435810954,55.545004610105536],[37.57172489165848,55.5443167839297],[37.57135289239042,55.54341622866457],[37.57075329159388,55.541659241862504],[37.57032371387163,55.54007156275554],[37.56984850448379,55.53770276061874],[37.56973950727459,55.536835085386],[37.56958239555382,55.53574772569516],[37.56878877466835,55.5328501920668],[37.56832675378422,55.531329436598554],[37.56793081009704,55.529850560305846],[37.56597728008825,55.523120366086204],[37.56202403380774,55.50947124909479],[37.560313897260784,55.503735816913974],[37.56002652367172,55.502562076357066],[37.55907333414183,55.499235627230746],[37.55778750983532,55.49476532284024],[37.555636846799075,55.487405826091845],[37.554643566157125,55.483674862963085],[37.55436239085,55.48185433113656],[37.55444379300911,55.48002607746037],[37.55502697729841,55.474834635031584],[37.555195355096345,55.473425202990995],[37.555299858901776,55.47225100609367],[37.555425081378814,55.4709464982852],[37.55556683928181,55.46966693155463],[37.555809554825686,55.468219399548786],[37.55611500874616,55.46706166276988],[37.55690963561827,55.46557742130065],[37.557969322068146,55.46436043523758],[37.560571491001205,55.46205978568724],[37.56184597097939,55.460856447573406],[37.56262494219527,55.45981195267814],[37.56290841760344,55.459317925852645],[37.56345467304,55.457935290636364],[37.56564432850155,55.45177634889765],[37.56600524850447,55.45069273584218],[37.566555887456445,55.44865806025169],[37.5673238966163,55.445656732545785],[37.56815055880156,55.442331010345356],[37.56827579532566,55.441232630565935],[37.56832083043639,55.44014624161312],[37.56832349590482,55.438421784438646],[37.56826919072594,55.437928919450485],[37.56821685099828,55.437396992001766],[37.56805608368262,55.43681588392627],[37.56749648517385,55.43550983243571],[37.56689623048629,55.43470259566328],[37.566317068235634,55.433679145036706],[37.56489815797998,55.431033087133976]],"type":"LineString"},
							"type": "Feature",
							"properties": {
								"year": 2010,
								"ownerLayer": "mcd",
								"ownerElement": "mcd2",
								"popupData": {"name": "Маршрут МЦД2"},
								"color": "#237a34"
							}
						}	
					]
				}
			},
			"layout": {
				"line-join": "round",
				"line-cap": "round"
			},
			"paint": {
				"line-color": { "type": "identity", "property": "color" },
				"line-width": 4
			}
		},
		{
			"id": "mcd-stations",
			"type": "symbol",
			"metadata":{
				"elements": [],
				"parentLayers": ["mcd"],
				"childLayers": [],
				"popupHtml": "<div><span>This is <span data-bind='text: name'></span></span></div>",
				"layerName": "Станции"
			},
			"source": {
				"type": "geojson",
				"data": {
					"type": "FeatureCollection",
					"features": [
						{
							"geometry": {
								"coordinates": [
								  37.51075877503524,
								  55.80602449730338
								],
								"type": "Point"
							},
							"type": "Feature",
							"properties": {
								"year": "2010",
								"ownerLayer": "mcd",
								"ownerElement": "mcd1",
								"popupData": {"name": "mcd1Station Station1"}
							}
						},{
							"geometry": {
								"coordinates": [
									37.47707180009223,
									55.7749305650959
								],
								"type": "Point"
							},
							"type": "Feature",
							"properties": {
								"year": "2010",
								"ownerLayer": "mcd",
								"ownerElement": "mcd1",
								"popupData": {"name": "mcd1Station Station2"}
							}
						},{
							"geometry": {
								"coordinates": [
								  37.53765953509131,
								  55.7659945672583
								],
								"type": "Point"
							},
							"type": "Feature",
							"properties": {
								"year": "2010",
								"ownerLayer": "mcd",
								"ownerElement": "mcd1",
								"popupData": {"name": "mcd1Station Station3"}
							}
						},{
							"geometry": {
								"coordinates": [
								  37.56581810974279,
								  55.785564268604986
								],
								"type": "Point"
							},
							"type": "Feature",
							"properties": {
								"year": "2010",
								"ownerLayer": "mcd",
								"ownerElement": "mcd1",
								"popupData": {"name": "mcd1Station Station4"}
							}
						}
					]
				}
			},
			"layout": {
				"icon-image": "marker-red",
				"text-field": "Station",
				"text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
				"text-offset": [0, 0.6],
				"text-anchor": "top"
			}
		}
	]
}
</script>
<script>
	var settings = {containerId: "mapbox", layersJsonContainerId: "mapbox-layers-json"};
	var mapbox = new Mapbox();
	mapbox.run(settings);
</script>

</body>
</html>